config:
  target: "{{ $processEnvironment.CLOUD_HOST }}"
  phases:
    - name: Warm up
      duration: 1
      arrivalRate: 1
  variables:
    limit:
      - 7
before:
  flow:
    - log: "(테스트) 사용자별 순위 부분조회 마지막 페이징값 조회 API"
    - get:
        url: "/leader-board/last-page?limit={{ limit }}"
        capture:
          json: "$.result"
          as: "leaderBoardLastPage"
        expect:
          - statusCode: 200
scenarios:
  - name: "리더보드"
    flow:
      # 사용자별 순위 부분조회 API
      - loop:
          - get:
              url: "/leader-board/page?limit={{ limit }}&page={{ $loopCount }}"
        count: "{{ leaderBoardLastPage }}"
